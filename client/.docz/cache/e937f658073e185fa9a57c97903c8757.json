{"remainingRequest":"C:\\Users\\jrjs1\\AppData\\Roaming\\npm\\node_modules\\docz\\node_modules\\thread-loader\\dist\\cjs.js??ref--5-1!C:\\Users\\jrjs1\\AppData\\Roaming\\npm\\node_modules\\docz\\node_modules\\babel-loader\\lib\\index.js??ref--5-2!C:\\Users\\jrjs1\\AppData\\Roaming\\npm\\node_modules\\docz\\node_modules\\source-map-loader\\index.js!F:\\projects\\Node\\delivery\\client\\src\\utils\\token.js","dependencies":[{"path":"F:\\projects\\Node\\delivery\\client\\src\\utils\\token.js","mtime":1560469248135},{"path":"C:\\Users\\jrjs1\\AppData\\Roaming\\npm\\node_modules\\docz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jrjs1\\AppData\\Roaming\\npm\\node_modules\\docz\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jrjs1\\AppData\\Roaming\\npm\\node_modules\\docz\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\jrjs1\\AppData\\Roaming\\npm\\node_modules\\docz\\node_modules\\source-map-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:KGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSAodHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsIDogcmVxdWlyZSgncmVhY3QtaG90LWxvYWRlcicpKS5lbnRlck1vZHVsZTsKICBlbnRlck1vZHVsZSAmJiBlbnRlck1vZHVsZShtb2R1bGUpOwp9KSgpOwoKdmFyIF9fc2lnbmF0dXJlX18gPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZGVmYXVsdC5zaWduYXR1cmUgOiBmdW5jdGlvbiAoYSkgewogIHJldHVybiBhOwp9OwoKZXhwb3J0IGNvbnN0IGdldFRva2VuID0gKCkgPT4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dC10b2tlbicpOwoKaWYgKHR5cGVvZiBnZXRUb2tlbiAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2V0VG9rZW4gJiYgZ2V0VG9rZW4gPT09IE9iamVjdChnZXRUb2tlbikgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShnZXRUb2tlbikpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2V0VG9rZW4sICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJnZXRUb2tlbiIsCiAgICAgIGZpbGVuYW1lOiAic3JjXFx1dGlsc1xcdG9rZW4uanMiCiAgICB9CiAgfSk7Cn0KCmV4cG9ydCBjb25zdCBnZXRJc0FkbWluID0gKCkgPT4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lzQWRtaW4nKTsgLy8gVE9ETzogQWRkIGRvY3MgZm9yIHRoZXNlIGZ1bmN0aW9ucwoKaWYgKHR5cGVvZiBnZXRJc0FkbWluICE9PSAndW5kZWZpbmVkJyAmJiBnZXRJc0FkbWluICYmIGdldElzQWRtaW4gPT09IE9iamVjdChnZXRJc0FkbWluKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKGdldElzQWRtaW4pKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdldElzQWRtaW4sICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJnZXRJc0FkbWluIiwKICAgICAgZmlsZW5hbWU6ICJzcmNcXHV0aWxzXFx0b2tlbi5qcyIKICAgIH0KICB9KTsKfQoKZXhwb3J0IGNvbnN0IHNhdmVUb2tlbiA9ICh0b2tlbiwgaXNBZG1pbikgPT4gewogIGlmICghdG9rZW4gfHwgIWlzQWRtaW4pIHRocm93IG5ldyBFcnJvcignVG9rZW4gYW5kIGlzQWRtaW4gUmVxdWlyZWQnKTsKICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnand0LXRva2VuJywgdG9rZW4pOwogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpc0FkbWluJywgaXNBZG1pbik7Cn07CgppZiAodHlwZW9mIHNhdmVUb2tlbiAhPT0gJ3VuZGVmaW5lZCcgJiYgc2F2ZVRva2VuICYmIHNhdmVUb2tlbiA9PT0gT2JqZWN0KHNhdmVUb2tlbikgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShzYXZlVG9rZW4pKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNhdmVUb2tlbiwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogInNhdmVUb2tlbiIsCiAgICAgIGZpbGVuYW1lOiAic3JjXFx1dGlsc1xcdG9rZW4uanMiCiAgICB9CiAgfSk7Cn0KCmV4cG9ydCBjb25zdCByZW1vdmVUb2tlbiA9ICgpID0+IHsKICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnand0LXRva2VuJyk7CiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2lzQWRtaW4nKTsKfTsKCmlmICh0eXBlb2YgcmVtb3ZlVG9rZW4gIT09ICd1bmRlZmluZWQnICYmIHJlbW92ZVRva2VuICYmIHJlbW92ZVRva2VuID09PSBPYmplY3QocmVtb3ZlVG9rZW4pICYmIE9iamVjdC5pc0V4dGVuc2libGUocmVtb3ZlVG9rZW4pKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlbW92ZVRva2VuLCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAicmVtb3ZlVG9rZW4iLAogICAgICBmaWxlbmFtZTogInNyY1xcdXRpbHNcXHRva2VuLmpzIgogICAgfQogIH0pOwp9CgpleHBvcnQgY29uc3QgZ2V0VG9rZW5JbmZvID0gKCkgPT4gewogIHRyeSB7CiAgICBjb25zdCB0b2tlbiA9IGdldFRva2VuKCk7CgogICAgaWYgKHRva2VuKSB7CiAgICAgIGNvbnN0IHBheWxvYWQgPSB3aW5kb3cuYXRvYih0b2tlbi5zcGxpdCgnLicpWzFdKTsKICAgICAgcmV0dXJuIEpTT04ucGFyc2UocGF5bG9hZCk7CiAgICB9CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogIH0KfTsKLyoqCiAqIFJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHRva2VuIGluZm8gYW5kIGEgYm9vbGVhbgogKiB0aGF0IGlzIHRydWUgaWYgdGhlIHVzZXIgaXMgYW4gYWRtaW4sIGZhbHNlIG90aGVyd2lzZS4KICogeyB0b2tlbkluZm86ICp0b2tlbiogLCBpc0FkbWluICp0cnVlL2ZhbHNlKiB9CiAqIFJldHVybnMgZmFsc2UgaWYgdGhlIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQuCiAqLwoKaWYgKHR5cGVvZiBnZXRUb2tlbkluZm8gIT09ICd1bmRlZmluZWQnICYmIGdldFRva2VuSW5mbyAmJiBnZXRUb2tlbkluZm8gPT09IE9iamVjdChnZXRUb2tlbkluZm8pICYmIE9iamVjdC5pc0V4dGVuc2libGUoZ2V0VG9rZW5JbmZvKSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnZXRUb2tlbkluZm8sICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJnZXRUb2tlbkluZm8iLAogICAgICBmaWxlbmFtZTogInNyY1xcdXRpbHNcXHRva2VuLmpzIgogICAgfQogIH0pOwp9CgpleHBvcnQgY29uc3QgaXNBdXRoZWQgPSAoKSA9PiB7CiAgY29uc3QgdG9rZW5JbmZvID0gZ2V0VG9rZW5JbmZvKCk7CiAgY29uc3QgaXNBZG1pbiA9IGdldElzQWRtaW4oKTsKCiAgaWYgKHRva2VuSW5mbyAmJiB0b2tlbkluZm8uZXhwID4gTWF0aC5yb3VuZChuZXcgRGF0ZSgpIC8gMTAwMCkpIHsKICAgIHJldHVybiB7CiAgICAgIHRva2VuSW5mbywKICAgICAgaXNBZG1pbgogICAgfTsKICB9CgogIHJldHVybiBmYWxzZTsKfTsKCmlmICh0eXBlb2YgaXNBdXRoZWQgIT09ICd1bmRlZmluZWQnICYmIGlzQXV0aGVkICYmIGlzQXV0aGVkID09PSBPYmplY3QoaXNBdXRoZWQpICYmIE9iamVjdC5pc0V4dGVuc2libGUoaXNBdXRoZWQpKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGlzQXV0aGVkLCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAiaXNBdXRoZWQiLAogICAgICBmaWxlbmFtZTogInNyY1xcdXRpbHNcXHRva2VuLmpzIgogICAgfQogIH0pOwp9CgpleHBvcnQgY29uc3Qgc2V0QXV0aEhlYWRlciA9ICgpID0+ICh7CiAgaGVhZGVyczogewogICAgYXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdChnZXRUb2tlbigpKQogIH0KfSk7CgppZiAodHlwZW9mIHNldEF1dGhIZWFkZXIgIT09ICd1bmRlZmluZWQnICYmIHNldEF1dGhIZWFkZXIgJiYgc2V0QXV0aEhlYWRlciA9PT0gT2JqZWN0KHNldEF1dGhIZWFkZXIpICYmIE9iamVjdC5pc0V4dGVuc2libGUoc2V0QXV0aEhlYWRlcikpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2V0QXV0aEhlYWRlciwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogInNldEF1dGhIZWFkZXIiLAogICAgICBmaWxlbmFtZTogInNyY1xcdXRpbHNcXHRva2VuLmpzIgogICAgfQogIH0pOwp9Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciByZWFjdEhvdExvYWRlciA9ICh0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwgOiByZXF1aXJlKCdyZWFjdC1ob3QtbG9hZGVyJykpLmRlZmF1bHQ7CgogIGlmICghcmVhY3RIb3RMb2FkZXIpIHsKICAgIHJldHVybjsKICB9CgogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGdldFRva2VuLCAiZ2V0VG9rZW4iLCAiRjpcXHByb2plY3RzXFxOb2RlXFxkZWxpdmVyeVxcY2xpZW50XFxzcmNcXHV0aWxzXFx0b2tlbi5qcyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGdldElzQWRtaW4sICJnZXRJc0FkbWluIiwgIkY6XFxwcm9qZWN0c1xcTm9kZVxcZGVsaXZlcnlcXGNsaWVudFxcc3JjXFx1dGlsc1xcdG9rZW4uanMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihzYXZlVG9rZW4sICJzYXZlVG9rZW4iLCAiRjpcXHByb2plY3RzXFxOb2RlXFxkZWxpdmVyeVxcY2xpZW50XFxzcmNcXHV0aWxzXFx0b2tlbi5qcyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKHJlbW92ZVRva2VuLCAicmVtb3ZlVG9rZW4iLCAiRjpcXHByb2plY3RzXFxOb2RlXFxkZWxpdmVyeVxcY2xpZW50XFxzcmNcXHV0aWxzXFx0b2tlbi5qcyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGdldFRva2VuSW5mbywgImdldFRva2VuSW5mbyIsICJGOlxccHJvamVjdHNcXE5vZGVcXGRlbGl2ZXJ5XFxjbGllbnRcXHNyY1xcdXRpbHNcXHRva2VuLmpzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoaXNBdXRoZWQsICJpc0F1dGhlZCIsICJGOlxccHJvamVjdHNcXE5vZGVcXGRlbGl2ZXJ5XFxjbGllbnRcXHNyY1xcdXRpbHNcXHRva2VuLmpzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoc2V0QXV0aEhlYWRlciwgInNldEF1dGhIZWFkZXIiLCAiRjpcXHByb2plY3RzXFxOb2RlXFxkZWxpdmVyeVxcY2xpZW50XFxzcmNcXHV0aWxzXFx0b2tlbi5qcyIpOwp9KSgpOwoKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgbGVhdmVNb2R1bGUgPSAodHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsIDogcmVxdWlyZSgncmVhY3QtaG90LWxvYWRlcicpKS5sZWF2ZU1vZHVsZTsKICBsZWF2ZU1vZHVsZSAmJiBsZWF2ZU1vZHVsZShtb2R1bGUpOwp9KSgpOw=="},{"version":3,"sources":["F:\\projects\\Node\\delivery\\client\\src\\utils\\token.js"],"names":["getToken","localStorage","getItem","getIsAdmin","saveToken","token","isAdmin","Error","setItem","removeToken","removeItem","getTokenInfo","payload","window","atob","split","JSON","parse","error","console","isAuthed","tokenInfo","exp","Math","round","Date","setAuthHeader","headers","authorization"],"mappings":";;;;;;;;;AAAA,OAAO,MAAMA,QAAQ,GAAG,MAAMC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAvB;;;;;;;;;;;;;AACP,OAAO,MAAMC,UAAU,GAAG,MAAMF,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAzB,C,CACP;;;;;;;;;;;;;AAEA,OAAO,MAAME,SAAS,GAAG,CAACC,KAAD,EAAQC,OAAR,KAAoB;AAC3C,MAAI,CAACD,KAAD,IAAU,CAACC,OAAf,EAAwB,MAAM,IAAIC,KAAJ,CAAU,4BAAV,CAAN;AAExBN,EAAAA,YAAY,CAACO,OAAb,CAAqB,WAArB,EAAkCH,KAAlC;AACAJ,EAAAA,YAAY,CAACO,OAAb,CAAqB,SAArB,EAAgCF,OAAhC;AACD,CALM;;;;;;;;;;;;;AAOP,OAAO,MAAMG,WAAW,GAAG,MAAM;AAC/BR,EAAAA,YAAY,CAACS,UAAb,CAAwB,WAAxB;AACAT,EAAAA,YAAY,CAACS,UAAb,CAAwB,SAAxB;AACD,CAHM;;;;;;;;;;;;;AAKP,OAAO,MAAMC,YAAY,GAAG,MAAM;AAChC,MAAI;AACF,UAAMN,KAAK,GAAGL,QAAQ,EAAtB;;AACA,QAAIK,KAAJ,EAAW;AACT,YAAMO,OAAO,GAAGC,MAAM,CAACC,IAAP,CAAYT,KAAK,CAACU,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAZ,CAAhB;AACA,aAAOC,IAAI,CAACC,KAAL,CAAWL,OAAX,CAAP;AACD;AACF,GAND,CAME,OAAOM,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACD;AACF,CAVM;AAYP;;;;;;;;;;;;;;;;;;AAMA,OAAO,MAAME,QAAQ,GAAG,MAAM;AAC5B,QAAMC,SAAS,GAAGV,YAAY,EAA9B;AACA,QAAML,OAAO,GAAGH,UAAU,EAA1B;;AACA,MAAIkB,SAAS,IAAIA,SAAS,CAACC,GAAV,GAAgBC,IAAI,CAACC,KAAL,CAAW,IAAIC,IAAJ,KAAa,IAAxB,CAAjC,EAAgE;AAC9D,WAAO;AACLJ,MAAAA,SADK;AAELf,MAAAA;AAFK,KAAP;AAID;;AACD,SAAO,KAAP;AACD,CAVM;;;;;;;;;;;;;AAaP,OAAO,MAAMoB,aAAa,GAAG,OAAO;AAClCC,EAAAA,OAAO,EAAE;AAAEC,IAAAA,aAAa,mBAAY5B,QAAQ,EAApB;AAAf;AADyB,CAAP,CAAtB;;;;;;;;;;;;;;;;;;;;;;0BA/CMA,Q;0BACAG,U;0BAGAC,S;0BAOAK,W;0BAKAE,Y;0BAkBAS,Q;0BAaAM,a","sourcesContent":["export const getToken = () => localStorage.getItem('jwt-token');\nexport const getIsAdmin = () => localStorage.getItem('isAdmin');\n// TODO: Add docs for these functions\n\nexport const saveToken = (token, isAdmin) => {\n  if (!token || !isAdmin) throw new Error('Token and isAdmin Required');\n\n  localStorage.setItem('jwt-token', token);\n  localStorage.setItem('isAdmin', isAdmin);\n};\n\nexport const removeToken = () => {\n  localStorage.removeItem('jwt-token');\n  localStorage.removeItem('isAdmin');\n};\n\nexport const getTokenInfo = () => {\n  try {\n    const token = getToken();\n    if (token) {\n      const payload = window.atob(token.split('.')[1]);\n      return JSON.parse(payload);\n    }\n  } catch (error) {\n    console.error(error);\n  }\n};\n\n/**\n * Returns an object containing the token info and a boolean\n * that is true if the user is an admin, false otherwise.\n * { tokenInfo: *token* , isAdmin *true/false* }\n * Returns false if the user is not authenticated.\n */\nexport const isAuthed = () => {\n  const tokenInfo = getTokenInfo();\n  const isAdmin = getIsAdmin();\n  if (tokenInfo && tokenInfo.exp > Math.round(new Date() / 1000)) {\n    return {\n      tokenInfo,\n      isAdmin,\n    };\n  }\n  return false;\n};\n\n\nexport const setAuthHeader = () => ({\n  headers: { authorization: `Bearer ${getToken()}` },\n});\n"]}]}